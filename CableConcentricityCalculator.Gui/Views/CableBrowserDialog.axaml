<Window xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:views="clr-namespace:CableConcentricityCalculator.Gui.Views;assembly=CableConcentricityCalculator.Gui"
        x:Class="CableConcentricityCalculator.Gui.Views.CableBrowserDialog"
        Title="Cable Browser"
        Width="920" Height="550"
        WindowStartupLocation="CenterOwner">

    <Window.Styles>
        <Style Selector="TextBlock.label">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="#666"/>
            <Setter Property="FontSize" Value="11"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Filter Panel -->
        <Border Background="#F5F5F5" Padding="12" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1">
            <Grid ColumnDefinitions="Auto,180,Auto,150,Auto,80,Auto,150" RowDefinitions="Auto,Auto">
                <TextBlock Text="Category:" Classes="label" Margin="0,0,8,0"/>
                <ComboBox Grid.Column="1" x:Name="CategoryCombo" MinWidth="120"
                          SelectionChanged="OnFilterChanged"/>

                <TextBlock Grid.Column="2" Text="Manufacturer:" Classes="label" Margin="16,0,8,0"/>
                <ComboBox Grid.Column="3" x:Name="ManufacturerCombo" MinWidth="140"
                          SelectionChanged="OnFilterChanged"/>

                <TextBlock Grid.Column="4" Text="Cores:" Classes="label" Margin="16,0,8,0"/>
                <ComboBox Grid.Column="5" x:Name="CoresCombo" MinWidth="80"
                          SelectionChanged="OnFilterChanged"/>

                <TextBlock Grid.Column="6" Text="Type:" Classes="label" Margin="16,0,8,0"/>
                <ComboBox Grid.Column="7" x:Name="TypeCombo" MinWidth="140"
                          SelectionChanged="OnFilterChanged"/>

                <TextBlock Grid.Row="1" Text="Search:" Classes="label" Margin="0,8,8,0"/>
                <TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="5" x:Name="SearchBox"
                         Watermark="Search by part number or name..." Margin="0,8,0,0"
                         TextChanged="OnSearchChanged"/>
                <TextBlock Grid.Row="1" Grid.Column="6" Grid.ColumnSpan="2" x:Name="ResultCountText"
                           Classes="label" Margin="16,8,0,0" HorizontalAlignment="Right"/>
            </Grid>
        </Border>

        <!-- Cable List -->
        <DataGrid Grid.Row="1" x:Name="CablesGrid" Margin="12"
              x:DataType="views:CableDisplayItem"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  CanUserReorderColumns="True"
                  CanUserResizeColumns="True"
                  CanUserSortColumns="True"
                  SelectionMode="Single"
                  GridLinesVisibility="Horizontal"
                  DoubleTapped="OnCableDoubleTapped">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Part Number" Binding="{Binding PartNumber}" Width="150"/>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="200"/>
                <DataGridTextColumn Header="Manufacturer" Binding="{Binding Manufacturer}" Width="100"/>
                <DataGridTextColumn Header="Cores" Binding="{Binding Cable.Cores.Count}" Width="50"/>
                <DataGridTextColumn Header="Conductor Ø" Binding="{Binding ConductorDiameterDisplay}" Width="90"/>
                <DataGridTextColumn Header="Overall Ø" Binding="{Binding OuterDiameterDisplay}" Width="90"/>
                <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="80"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Button Panel -->
        <Border Grid.Row="2" Background="#F5F5F5" Padding="12" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <Grid ColumnDefinitions="*,Auto,Auto,Auto">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Quantity:" VerticalAlignment="Center" FontSize="12"/>
                    <NumericUpDown x:Name="QuantityUpDown" Value="1" Minimum="1" Maximum="1000" Width="140"/>
                </StackPanel>
                <Button Grid.Column="1" Content="Cancel" x:Name="CancelButton" Padding="16,8" Margin="0,0,8,0"/>
                <Button Grid.Column="2" Content="Add Selected" x:Name="AddButton" Padding="16,8"
                        Classes="accent" IsEnabled="False"/>
                <Button Grid.Column="3" Content="Create Custom..." x:Name="CustomButton" Padding="16,8" Margin="8,0,0,0"/>
            </Grid>
        </Border>
    </Grid>
</Window>
